/* ────────────────────────────────────────────────────────────────────────────
   Diário — Design System CSS
   - Tokens (tipografia, cores, radius, sombras)
   - Reset suave
   - Layout base (app, grid responsivo)
   - Componentes: Card, Botão, Inputs, Topbar, Search, Filtros, Toast
   - Lista de Entradas (cards), truncamento, estados
   - Acessibilidade (focus visible, sr-only)
   - Microinterações (hover/press, ripple)
   - Preferências de usuário (dark mode, reduced motion)
   ─────────────────────────────────────────────────────────────────────────── */

:root{
  /* Tipografia */
  --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Inter, Roboto,
               "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  --font-serif: "Ibarra Real Nova", "Georgia", serif;

  /* Escala tipográfica */
  --fs-12: .75rem;   /* 12px  - legendas/metadados */
  --fs-14: .875rem;  /* 14px  - corpo secundário */
  --fs-16: 1rem;     /* 16px  - corpo padrão */
  --fs-18: 1.125rem; /* 18px  - destaque leve */
  --fs-20: 1.25rem;  /* 20px  - subtítulo */
  --fs-28: 1.75rem;  /* 28px  - título */

  /* Espaçamento (8pt system) */
  --sp-4: 4px;  --sp-8: 8px;  --sp-12: 12px; --sp-16: 16px; --sp-20: 20px;
  --sp-24: 24px; --sp-32: 32px;

  /* Cores (claro) */
  --bg:       #FAFAFA;
  --paper:    #FFFFFF;
  --ink:      #0B0B0C;
  --muted:    #6B7280;   /* texto secundário */
  --stroke:   #E5E7EB;   /* bordas */
  --soft:     #F3F4F6;   /* superfícies suaves */
  --brand:    #2D5BFF;   /* ação primária */
  --brand-ink:#FFFFFF;   /* texto sobre brand */
  --accent:   #10B981;   /* sucesso */
  --warn:     #F59E0B;   /* aviso */
  --danger:   #EF4444;   /* erro */

  /* Efeitos */
  --r: 14px;                           /* border-radius padrão */
  --shadow: 0 6px 30px rgba(2,6,23,.06);
  --ring: 0 0 0 3px color-mix(in srgb, var(--brand) 22%, transparent);

  /* Larguras */
  --max: 1040px;
}

/* Dark mode automático (respeita SO) */
@media (prefers-color-scheme: dark){
  :root{
    --bg:       #0F1115;
    --paper:    #171923;
    --ink:      #E5E7EB;
    --muted:    #9CA3AF;
    --stroke:   #242735;
    --soft:     #0F121B;
    --brand:    #5C7CFF;
    --brand-ink:#0B0D16;
    --shadow:   0 6px 30px rgba(0,0,0,.35);
  }
}

/* Respeita usuários com redução de movimento */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* ── Reset suave / base tipográfica ───────────────────────────────────────── */

*{ box-sizing: border-box }
html,body{ height:100% }
html{ -webkit-text-size-adjust:100% }
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family:var(--font-sans); font-size:var(--fs-16); line-height:1.55;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
img{ max-width:100%; height:auto; display:block }
a{ color:inherit; text-decoration: none }
button{ font:inherit; color:inherit; background:none; border:none; padding:0; cursor:pointer }

h1,h2,h3{ font-family:var(--font-serif); margin:0 0 var(--sp-8); letter-spacing:-0.01em }
h1{ font-size:var(--fs-28) }
h2{ font-size:var(--fs-20) }
h3{ font-size:var(--fs-18) }
p,li{ margin:0 0 var(--sp-12) }
small{ font-size:var(--fs-12); color:var(--muted) }

/* ── Layout da aplicação ─────────────────────────────────────────────────── */

.app-wrap{ max-width:var(--max); margin:0 auto; padding: var(--sp-24) var(--sp-24) }
.topbar{
  position: sticky; top:0; z-index:10;
  backdrop-filter: blur(10px);
  background: color-mix(in srgb, var(--paper) 75%, transparent);
  border-bottom:1px solid var(--stroke);
}

/* Grid responsivo mantendo core (coluna única -> duas colunas) */
.grid{ display:grid; gap: var(--sp-20); grid-template-columns: 1fr }
@media (min-width: 900px){
  .grid{ grid-template-columns: 1.2fr .8fr }
}

/* ── Componentes base ────────────────────────────────────────────────────── */

/* Card genérico */
.card{
  background:var(--paper); border:1px solid var(--stroke);
  border-radius:var(--r); box-shadow:var(--shadow);
}

/* Botões */
.button{
  position:relative; display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  padding:10px 14px; border-radius:12px; border:1px solid var(--stroke);
  background:var(--paper); font-weight:600; transition: transform .06s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease, color .2s ease;
  will-change: transform;
}
.button:hover{ transform: translateY(-1px); box-shadow: var(--shadow) }
.button:active{ transform: translateY(0) scale(.99) }
.button:focus-visible{ outline: none; box-shadow: var(--ring) }

.button--primary{ background:var(--brand); border-color:var(--brand); color:var(--brand-ink) }
.button--success{ background:var(--accent); border-color:var(--accent); color:#072814 }
.button--ghost{ background:transparent }
.button--danger{ background:var(--danger); border-color:var(--danger); color:#fff }

/* Ripple (JS injeta .ripple) */
.button{ overflow:hidden }
.button .ripple{
  position:absolute; border-radius:50%; transform:scale(0); opacity:.28;
  background: currentColor; pointer-events:none; animation: ripple .6s ease-out forwards;
}
@keyframes ripple{ to{ transform:scale(12); opacity:0 } }

/* Inputs */
input[type="text"], input[type="search"], input[type="date"], textarea, select{
  width:100%; background:transparent; color:var(--ink);
  border:1px solid var(--stroke); border-radius:12px; padding:12px 14px; outline:none;
  transition: border-color .2s ease, box-shadow .2s ease, transform .05s ease, background .2s ease;
}
input::placeholder, textarea::placeholder{ color: color-mix(in srgb, var(--muted) 80%, transparent) }
input:focus, textarea:focus, select:focus{
  border-color: var(--brand);
  box-shadow: var(--ring);
}

/* Campos compostos (busca) */
.search{
  display:flex; align-items:center; gap: var(--sp-8);
  background: var(--soft); border:1px solid var(--stroke); border-radius: 12px; padding: 10px 12px;
}
.search__icon{ opacity:.6 }
.search input[type="search"]{ border:0; padding:0; background:transparent }

/* Grupo de filtros */
.filter-chip{
  display:inline-flex; align-items:center; gap:6px;
  border:1px solid var(--stroke); background:var(--paper); border-radius: 999px;
  padding:8px 12px; font-size: var(--fs-14);
  transition: background .2s, border-color .2s, color .2s;
}
.filter-chip[aria-pressed="true"], .filter-chip.is-active{
  background: color-mix(in srgb, var(--brand) 12%, var(--paper));
  border-color: color-mix(in srgb, var(--brand) 40%, var(--stroke));
  color: color-mix(in srgb, var(--brand) 70%, var(--ink));
}

/* Toast */
.toast{
  background:var(--paper); border:1px solid var(--stroke); border-radius:12px; box-shadow:var(--shadow);
  padding: 12px 14px; position: fixed; right: 20px; bottom: 20px; display:none; z-index: 50;
}
.toast--show{ display:block; animation: toastIn .24s ease-out, toastOut .22s ease-in 2.8s forwards }
@keyframes toastIn{ from{ transform: translateY(8px); opacity:0 } to{ transform: translateY(0); opacity:1 } }
@keyframes toastOut{ to{ transform: translateY(8px); opacity:0 } }

/* ── Entradas do Diário (lista em cards) ─────────────────────────────────── */

.entry{
  border:1px solid var(--stroke); border-radius:var(--r); background:var(--paper);
  padding: var(--sp-14, 14px); /* compatível com navegadores sem var fallback */
  padding: 14px;
  transition: box-shadow .2s ease, transform .06s ease, border-color .2s ease;
}
.entry:hover{ transform: translateY(-1px); box-shadow: var(--shadow) }
.entry:focus-within{ box-shadow: var(--ring) }

.entry__meta{
  display:flex; align-items:center; justify-content:space-between;
  color:var(--muted); font-size:var(--fs-12); gap: var(--sp-8);
}
.entry__text{ margin-top: .5rem; font-size: var(--fs-16) }

/* Truncamento opcional (aplique .entry--clamp em cards listados) */
.entry--clamp .entry__text{
  display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;
}

/* Botão de favorito compacto dentro do card */
.entry__star{
  border:1px solid var(--stroke); border-radius: 999px; padding: 4px 8px; font-size: var(--fs-12);
  background: var(--paper);
}
.entry__star[aria-pressed="true"]{ background: color-mix(in srgb, var(--warn) 10%, var(--paper)); border-color: color-mix(in srgb, var(--warn) 35%, var(--stroke)) }

/* Estados vazios */
.empty{
  text-align:center; color:var(--muted); border:1px dashed var(--stroke); border-radius: var(--r);
  padding: var(--sp-24);
}

/* ── Acessibilidade ─────────────────────────────────────────────────────── */

.sr-only{
  position:absolute; width:1px; height:1px; margin:-1px; padding:0; clip:rect(0 0 0 0); overflow:hidden; border:0;
}
.visually-muted{ color: var(--muted); font-size: var(--fs-12) }

:focus-visible{ outline: none; box-shadow: var(--ring) }

/* Melhor foco para itens clicáveis em teclado (ex.: .entry) */
.entry:focus-visible{ outline: 3px solid color-mix(in srgb, var(--brand) 40%, transparent); outline-offset:2px }

/* Estados desativados */
[disabled], .is-disabled{ opacity:.5; cursor:not-allowed; pointer-events:none }

/* ── Utilitários de layout/spacing (leves e opcionais) ───────────────────── */

.stack-8  > * + *{ margin-top: var(--sp-8) }
.stack-12 > * + *{ margin-top: var(--sp-12) }
.stack-16 > * + *{ margin-top: var(--sp-16) }
.row{ display:flex; gap: var(--sp-8); align-items:center }
.row.wrap{ flex-wrap:wrap }
.space-between{ display:flex; justify-content:space-between; align-items:center; gap: var(--sp-8) }
.mt-0{ margin-top:0 } .mt-8{ margin-top:var(--sp-8) } .mt-16{ margin-top:var(--sp-16) }
.mb-0{ margin-bottom:0 } .mb-8{ margin-bottom:var(--sp-8) } .mb-16{ margin-bottom:var(--sp-16) }
.p-12{ padding: var(--sp-12) } .p-16{ padding: var(--sp-16) } .p-24{ padding: var(--sp-24) }

/* ── Topbar / Header padrão (opcional) ───────────────────────────────────── */

.header{
  display:flex; align-items:center; gap: var(--sp-12);
  padding: var(--sp-12) var(--sp-16);
}
.header__title{ font-weight:700; font-family:var(--font-serif); font-size:var(--fs-20) }
.header__spacer{ margin-left:auto }

/* Toggle de modo manual (css-only visual; funcionalidade via JS) */
.mode-toggle{
  border:1px solid var(--stroke); background:var(--paper); border-radius:12px; padding:8px 12px; font-size: var(--fs-14);
}
.mode-toggle:focus-visible{ box-shadow: var(--ring) }

/* ── Tabelas/relatórios (caso exporte/estatísticas) ─────────────────────── */

.table{
  width:100%; border-collapse: collapse; font-size: var(--fs-14); background:var(--paper);
  border:1px solid var(--stroke); border-radius: var(--r); overflow:hidden;
}
.table th, .table td{ padding: 10px 12px; border-bottom:1px solid var(--stroke) }
.table th{ text-align:left; color:var(--muted); font-weight:600 }

/* ── Helpers de cor para feedback textual ───────────────────────────────── */

.text-muted{ color:var(--muted) }
.text-success{ color:var(--accent) }
.text-warn{ color:var(--warn) }
.text-danger{ color:var(--danger) }

/* ── Pequenos toques de transição entre seções (opcionais) ──────────────── */

.fade-in{ animation: fadeIn .24s ease-out both }
@keyframes fadeIn{ from{ opacity:0; transform: translateY(4px) } to{ opacity:1; transform: translateY(0) } }
